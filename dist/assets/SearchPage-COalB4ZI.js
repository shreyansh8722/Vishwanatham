import{j as e,u as k,X as T,Y as L,a as A,W as P}from"./ui-vendor-DvYRwaTC.js";import{r as a,b as z}from"./react-vendor-BrYn47dg.js";import{a as D,C as E,d as F}from"./index-BaMFXKro.js";import{q,l as B,m as Q,p as R,r as V}from"./firebase-vendor-ChDbu2GB.js";import{N as K,F as M}from"./Footer-BU4Q99GI.js";import{P as O}from"./ProductCard-DiMwfbc_.js";function U(t,o=300){const[n,l]=a.useState(t);return a.useEffect(()=>{const d=setTimeout(()=>{l(t)},o);return()=>{clearTimeout(d)}},[t,o]),n}function J(){const[t,o]=a.useState(""),n=U(t,300),[l,d]=a.useState([]),[x,m]=a.useState([]),[j,b]=a.useState(!0),[W,p]=a.useState(!1),{addToCart:N}=D(),w=z();return a.useEffect(()=>{(async()=>{try{const r=q(B(F,"products"),Q("createdAt","desc"),R(100)),u=(await V(r)).docs.map(i=>({id:i.id,...i.data()}));d(u)}catch(r){console.error("Search index init failed:",r)}finally{b(!1)}})()},[]),a.useEffect(()=>{if(!n||n.length<2){m([]);return}const s=n.toLowerCase(),r=l.filter(c=>{var g,f,h,y;const u=(g=c.name)==null?void 0:g.toLowerCase().includes(s),i=(f=c.category)==null?void 0:f.toLowerCase().includes(s),C=(h=c.subCategory)==null?void 0:h.toLowerCase().includes(s),S=(y=c.tags_lowercase)==null?void 0:y.some(v=>v.includes(s));return u||i||C||S});m(r)},[n,l]),e.jsxs("div",{className:"min-h-screen bg-white font-sans text-brand-dark flex flex-col w-full overflow-x-hidden",children:[e.jsx(K,{cartCount:0,onOpenCart:()=>p(!0)}),e.jsxs("div",{className:"flex-grow max-w-7xl mx-auto px-4 md:px-8 py-6 md:py-12 w-full",children:[e.jsx("div",{className:"max-w-2xl mx-auto mb-10 sticky top-20 z-30 bg-white/95 backdrop-blur py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>w(-1),className:"md:hidden p-2 -ml-2 text-gray-500",children:e.jsx(k,{size:24})}),e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",value:t,onChange:s=>o(s.target.value),placeholder:"Search sarees, lehengas...",className:"w-full border-b-2 border-gray-200 py-3 pl-2 pr-10 text-lg font-serif placeholder-gray-300 focus:outline-none focus:border-[#B08D55] bg-transparent",autoFocus:!0}),t?e.jsx("button",{onClick:()=>o(""),className:"absolute right-0 top-1/2 -translate-y-1/2 p-2 text-gray-400",children:e.jsx(T,{size:20})}):e.jsx(L,{size:20,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-300"})]})]})}),e.jsx("div",{children:j?e.jsx("div",{className:"flex justify-center py-20",children:e.jsx(A,{className:"animate-spin text-gray-300"})}):x.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 gap-y-8 md:gap-x-8 animate-fade-in",children:x.map(s=>e.jsx(O,{item:s,onAddToCart:r=>{N(r),p(!0)}},s.id))}):t.length>1?e.jsxs("div",{className:"text-center py-20 text-gray-400",children:[e.jsxs("p",{children:['No matches found for "',t,'"']}),e.jsx("p",{className:"text-xs mt-2",children:'Try "Saree", "Silk", or "Red"'})]}):e.jsxs("div",{className:"mt-8",children:[e.jsxs("h4",{className:"text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-4 flex items-center gap-2",children:[e.jsx(P,{size:14})," Trending Searches"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Banarasi Saree","Bridal Lehenga","Katan Silk","Pink Dupatta","Suit"].map(s=>e.jsx("button",{onClick:()=>o(s),className:"px-4 py-2 bg-gray-50 rounded-full text-sm text-gray-600 hover:bg-gray-100 transition-colors",children:s},s))})]})})]}),e.jsx(M,{}),e.jsx(E,{})]})}export{J as default};
