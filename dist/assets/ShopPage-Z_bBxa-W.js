import{j as e,X as $,i as H,k as D,m as P,l as G,a as I,A as B}from"./ui-vendor-DvYRwaTC.js";import{r as i,u as J,b as X}from"./react-vendor-BrYn47dg.js";import{u as Q,N as W,F as Y}from"./Footer-BU4Q99GI.js";import{P as Z}from"./ProductCard-DiMwfbc_.js";import{u as ee,a as te,C as se}from"./index-BaMFXKro.js";import{u as ae}from"./useSiteAssets-xotO0Bae.js";import"./firebase-vendor-ChDbu2GB.js";const re=[{id:"subCategory",label:"Category",options:["Saree","Lehenga","Suit","Dupatta","Men"]},{id:"fabric",label:"Fabric",options:["Katan Silk","Georgette","Organza","Munga Silk","Tussar"]},{id:"technique",label:"Technique",options:["Kadhua","Fekwa","Tanchoi","Jangla","Meenakari"]}],ie=({group:n,isOpen:x,onToggle:u,selectedValues:s=[],onChange:g})=>e.jsxs("div",{className:"border-b border-heritage-border py-4",children:[e.jsxs("button",{onClick:()=>u(n.id),className:"flex justify-between items-center w-full py-2 group",children:[e.jsx("span",{className:"text-xs uppercase tracking-widest text-heritage-charcoal group-hover:text-heritage-gold transition-colors",children:n.label}),e.jsx(H,{size:14,className:`transition-transform duration-300 ${x?"rotate-180":""}`})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${x?"max-h-64 opacity-100 mt-2":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"flex flex-col gap-2 pb-2",children:n.options.map(h=>{const o=s.includes(h);return e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group/item hover:opacity-80",children:[e.jsxs("div",{className:`relative w-4 h-4 border rounded-sm flex items-center justify-center transition-colors ${o?"border-heritage-gold bg-heritage-gold":"border-heritage-grey/40 group-hover/item:border-heritage-gold"}`,children:[e.jsx("input",{type:"checkbox",className:"peer appearance-none w-full h-full absolute inset-0 cursor-pointer",checked:o,onChange:()=>g(n.id,h)}),e.jsx(D,{size:10,className:`text-white transition-opacity ${o?"opacity-100":"opacity-0"}`})]}),e.jsx("span",{className:`text-sm font-sans ${o?"text-heritage-charcoal font-medium":"text-heritage-grey"}`,children:h})]},h)})})})]}),T=({mobile:n,filters:x={},setFilters:u})=>{const[s,g]=i.useState(["subCategory","fabric"]),h=r=>{g(c=>c.includes(r)?c.filter(l=>l!==r):[...c,r])},o=(r,c)=>{u(l=>{const m=l[r]||[],y=m.includes(c)?m.filter(p=>p!==c):[...m,c];if(y.length===0){const{[r]:p,...N}=l;return N}return{...l,[r]:y}})},w=()=>u({});return e.jsxs("div",{className:`flex flex-col ${n?"":"pr-8"}`,children:[!n&&e.jsx("h3",{className:"text-lg font-serif italic mb-6 text-heritage-charcoal",children:"Filters"}),re.map(r=>e.jsx(ie,{group:r,isOpen:s.includes(r.id),onToggle:h,selectedValues:x[r.id]||[],onChange:o},r.id)),Object.keys(x).length>0&&e.jsxs("button",{onClick:w,className:"mt-8 text-xs uppercase tracking-widest text-heritage-grey hover:text-red-600 flex items-center gap-2 transition-colors border-t border-dashed border-gray-200 pt-4 w-full",children:[e.jsx($,{size:12})," Clear All Filters"]})]})},_={sarees:{title:"The Saree Edit",description:"Six yards of pure grace. Handwoven Banarasi silk masterpieces.",imgKey:"header_sarees"},lehengas:{title:"Bridal Heirlooms",description:"Intricate Jangla and Tanchoi weaves for your special day.",imgKey:"header_lehengas"},suits:{title:"Unstitched Classics",description:"Versatile silk fabrics for the contemporary wardrobe.",imgKey:"header_suits"},men:{title:"The Royal Groom",description:"Sherwanis and Kurtas crafted for nobility.",imgKey:"header_men"},default:{title:"All Collections",description:"Explore our complete range of handloom treasures.",imgKey:"header_default"}};function me(){const n=J(),x=X(),s=new URLSearchParams(n.search).get("cat"),g=s?s.toLowerCase():"default",{getAsset:h}=ae(),{fetchProducts:o}=ee(),{toggleFavorite:w,isFavorite:r}=Q(),{addToCart:c}=te(),[l,m]=i.useState([]),[y,p]=i.useState(!0),[N,A]=i.useState(!1),[E,L]=i.useState(!1),[f,K]=i.useState("newest"),[d,j]=i.useState({}),[R,C]=i.useState(null),[M,k]=i.useState(!0),[S,z]=i.useState(!1),b=_[g]||_.default,q=h(b.imgKey);i.useEffect(()=>{if(m([]),C(null),k(!0),p(!0),s){const a=s.charAt(0).toUpperCase()+s.slice(1);j(v=>({...v,subCategory:[a]}))}(async()=>{try{const a=await o({subCategory:s?s.charAt(0).toUpperCase()+s.slice(1):null,sortOption:f});a&&(m(a.data||[]),C(a.lastVisible),k(a.hasMore))}catch(a){console.error("Failed to load shop products",a)}finally{p(!1)}})()},[s,f,o]);const U=async()=>{if(!(!M||S)){z(!0);try{const t=await o({subCategory:s?s.charAt(0).toUpperCase()+s.slice(1):null,sortOption:f,lastDoc:R});t&&(m(a=>[...a,...t.data]),C(t.lastVisible),k(t.hasMore))}catch(t){console.error("Error loading more",t)}finally{z(!1)}}},F=i.useMemo(()=>l?l.filter(t=>{var a,v,O;return!(((a=d.subCategory)==null?void 0:a.length)>0&&!d.subCategory.includes(t.subCategory)||((v=d.fabric)==null?void 0:v.length)>0&&!d.fabric.includes(t.fabric)||((O=d.technique)==null?void 0:O.length)>0&&!d.technique.includes(t.technique))}):[],[l,d]),V=t=>{c({...t,quantity:1}),A(!0)};return e.jsxs("div",{className:"min-h-screen bg-white font-serif text-heritage-charcoal selection:bg-heritage-gold selection:text-white",children:[e.jsx(W,{}),e.jsxs("div",{className:"relative h-[40vh] md:h-[55vh] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20 z-10"}),e.jsx(P.img,{initial:{scale:1.1,opacity:0},animate:{scale:1,opacity:1},transition:{duration:1.5},src:q,alt:b.title,className:"w-full h-full object-cover object-top"},g),e.jsx("div",{className:"absolute inset-0 z-20 flex flex-col justify-center items-center text-center text-white px-6",children:e.jsxs(P.div,{initial:{y:30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.8},children:[e.jsx("span",{className:"block text-xs md:text-sm font-bold font-sans uppercase tracking-[0.3em] mb-4 md:mb-6 text-white/90",children:"Handwoven Purity"}),e.jsx("h1",{className:"text-4xl md:text-8xl italic font-light mb-4 md:mb-6 leading-none",children:b.title}),e.jsx("p",{className:"font-sans text-xs md:text-lg tracking-wide opacity-90 max-w-lg mx-auto font-light leading-relaxed",children:b.description})]},b.title)})]}),e.jsxs("div",{className:"max-w-[1920px] mx-auto px-4 md:px-12 py-8 md:py-16 flex flex-col md:flex-row gap-8 md:gap-16 relative",children:[e.jsx("aside",{className:"hidden md:block w-72 shrink-0 sticky top-48 h-fit z-30",children:e.jsx(T,{filters:d,setFilters:j})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 md:mb-12 pb-4 md:pb-6 border-b border-gray-100",children:[e.jsxs("span",{className:"text-[10px] md:text-xs font-bold uppercase tracking-widest text-gray-500",children:[F.length," Products Found"]}),e.jsxs("div",{className:"flex gap-6 md:gap-8",children:[e.jsxs("button",{onClick:()=>L(!0),className:"md:hidden flex items-center gap-2 text-[10px] md:text-xs font-bold uppercase tracking-widest text-heritage-charcoal",children:[e.jsx(G,{size:14})," Filters"]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-2 text-[10px] md:text-xs font-bold uppercase tracking-widest hover:text-heritage-gold transition-colors",children:["Sort: ",e.jsx("span",{className:"text-heritage-charcoal",children:f==="newest"?"Newest":f==="price_low"?"Price: Low-High":"Price: High-Low"})," ",e.jsx(H,{size:14})]}),e.jsx("div",{className:"absolute right-0 top-full pt-4 opacity-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto transition-all z-40",children:e.jsx("div",{className:"bg-white shadow-2xl border border-gray-100 py-3 w-48 flex flex-col",children:[{label:"Newest",val:"newest"},{label:"Price: Low-High",val:"price_low"},{label:"Price: High-Low",val:"price_high"}].map(t=>e.jsx("button",{onClick:()=>K(t.val),className:"text-left px-6 py-2.5 text-xs uppercase tracking-widest hover:bg-gray-50 transition-colors text-gray-600 hover:text-black font-sans",children:t.label},t.val))})})]})]})]}),y&&l.length===0?e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-8 md:gap-x-6 md:gap-y-16",children:[...Array(6)].map((t,a)=>e.jsx("div",{className:"aspect-[3/4] bg-gray-50 animate-pulse"},a))}):F.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-x-4 gap-y-10 md:gap-x-8 md:gap-y-20",children:F.map(t=>e.jsx(Z,{item:t,onAddToCart:()=>V(t),isFavorite:r(t.id),onToggleFavorite:w},t.id))}),M&&e.jsx("div",{className:"mt-16 text-center",children:e.jsx("button",{onClick:U,disabled:S,className:"px-8 py-3 bg-heritage-sand hover:bg-heritage-charcoal hover:text-white transition-colors text-xs font-bold uppercase tracking-widest rounded-sm disabled:opacity-50",children:S?e.jsx(I,{className:"animate-spin",size:16}):"Load More Products"})})]}):e.jsxs("div",{className:"py-20 md:py-32 text-center",children:[e.jsx("h3",{className:"font-serif text-2xl md:text-3xl italic text-gray-400 mb-6",children:"No treasures found matching your criteria."}),e.jsx("button",{onClick:()=>{j({}),x("/shop")},className:"text-xs uppercase font-bold tracking-widest border-b border-black pb-1 hover:text-heritage-gold hover:border-heritage-gold transition-colors",children:"Clear All Filters"})]})]})]}),e.jsx(Y,{}),e.jsx(se,{open:N,onClose:()=>A(!1)}),e.jsx(B,{children:E&&e.jsxs(P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",ease:"circOut",duration:.4},className:"fixed inset-0 z-[100] bg-white p-6 md:p-8 md:hidden overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8 pb-4 border-b border-gray-100",children:[e.jsx("h2",{className:"font-serif text-2xl italic",children:"Refine Selection"}),e.jsx("button",{onClick:()=>L(!1),className:"text-[10px] font-bold uppercase tracking-widest border border-gray-200 px-3 py-1 rounded-sm",children:"Close"})]}),e.jsx(T,{mobile:!0,filters:d,setFilters:j})]})})]})}export{me as default};
