import{j as e,X as G,m as U,f as E,n as xe,a as Z,U as he,k as me,o as ue,T as ge,p as pe,A as H,C as se,e as ae,H as fe,q as be,r as je,I as ve,R as we,s as ye,g as Ne,h as ke,L as Ce,t as Se,i as ze}from"./ui-vendor-DvYRwaTC.js";import{r as i,e as Pe,b as Re,L as $}from"./react-vendor-BrYn47dg.js";import{u as Ae,d as W,l as K,x as Xe,y as Ye,z as De,A as Me,q as re,m as Le,w as ie,f as ne,B as Te,p as Ie,r as $e}from"./firebase-vendor-ChDbu2GB.js";import{d as L,s as Ue,b as Be,a as We,A as Ee,f as B,z as _}from"./index-BaMFXKro.js";import{u as Fe,N as Oe,F as He}from"./Footer-BU4Q99GI.js";import{S as ee}from"./SEO-CwjqJFCT.js";import{P as _e}from"./ProductCard-DiMwfbc_.js";const qe=({isOpen:a,onClose:o,category:c})=>{if(!a)return null;const u=c!=null&&c.toLowerCase().includes("blouse")?"blouse":"suit",t={blouse:{headers:["Size","Bust (in)","Waist (in)","Shoulder (in)","Length (in)"],rows:[["XS","32","26","13.5","14"],["S","34","28","14","14.5"],["M","36","30","14.5","15"],["L","38","32","15","15.5"],["XL","40","34","15.5","16"]]},suit:{headers:["Size","Bust (in)","Waist (in)","Hip (in)","Kurta Length"],rows:[["XS","34","30","36","45"],["S","36","32","38","45"],["M","38","34","40","46"],["L","40","36","42","46"],["XL","42","38","44","47"]]}},g=t[u]||t.suit;return e.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl relative shadow-2xl animate-slide-up",children:[e.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(G,{size:20,className:"text-gray-500"})}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsx("h3",{className:"font-serif text-2xl italic text-gray-900 mb-2",children:"Size Guide"}),e.jsxs("p",{className:"text-xs uppercase tracking-widest text-gray-500 mb-8",children:["Standard Sizing for ",c||"Garments"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-700 uppercase text-xs tracking-wider",children:e.jsx("tr",{children:g.headers.map((j,h)=>e.jsx("th",{className:"px-6 py-4 font-medium",children:j},h))})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:g.rows.map((j,h)=>e.jsx("tr",{className:"hover:bg-gray-50/50 transition-colors",children:j.map((l,f)=>e.jsx("td",{className:`px-6 py-4 text-gray-600 ${f===0?"font-bold text-gray-900":""}`,children:l},f))},h))})]})}),e.jsx("div",{className:"mt-8 p-4 bg-gray-50 border border-gray-100 text-xs text-gray-500 leading-relaxed",children:"* All measurements are in inches. Garment measurements may vary slightly due to the handmade nature of the product. For custom fitting, please contact our stylists."})]})]})})},Ze=({spotId:a,user:o,onPostSuccess:c,isPosting:u,setIsPosting:t})=>{const[g,j]=i.useState(5),[h,l]=i.useState(""),[f,m]=i.useState(null),[N,k]=i.useState(0),s=x=>new Promise((b,P)=>{const S=`${Date.now()}_${x.name.replace(/\s+/g,"_")}`,R=`reviews/${a}/${S}`,D=Ye(Ue,R),X=De(D,x);X.on("state_changed",C=>{const M=C.bytesTransferred/C.totalBytes*100;k(M)},C=>P(C),async()=>{const C=await Me(X.snapshot.ref);b(C)})}),A=async()=>{if(!(!o||!h.trim())){t(!0),k(0);try{let x=null;f&&(x=await s(f));const b={spotId:a,userId:o.uid,username:o.displayName||o.email.split("@")[0]||"Anonymous",userEmail:o.email,rating:g,comment:h.trim(),imageUrl:x||null,helpfulCount:0,createdAt:Ae()},P=W(L,"products",a),S=W(K(L,"reviews"));await Xe(L,async R=>{const D=await R.get(P);if(!D.exists())throw"Product document does not exist!";const X=D.data(),C=X.reviewCount||0,M=X.averageRating||0,Y=C+1,r=(M*C+g)/Y;R.set(S,b),R.update(P,{averageRating:parseFloat(r.toFixed(1)),reviewCount:Y})}),j(5),l(""),m(null),k(0),c()}catch(x){console.error("Failed to post review:",x),alert("Failed to post review. Please try again.")}finally{t(!1)}}};return e.jsxs(U.div,{className:"bg-white p-4 rounded-sm border border-gray-200 mb-8",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[Array.from({length:5}).map((x,b)=>e.jsx("button",{onClick:()=>j(b+1),className:"focus:outline-none transition-transform hover:scale-110",children:e.jsx(E,{size:24,className:`${b+1<=g?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},b+1)),e.jsxs("span",{className:"text-sm text-gray-500 ml-2 font-medium",children:[g," / 5"]})]}),e.jsx("textarea",{rows:3,className:"w-full border border-gray-200 rounded-sm p-3 text-sm focus:outline-none focus:border-[#B08D55] mb-3 bg-gray-50",placeholder:"Share your experience with this product...",value:h,onChange:x=>l(x.target.value)}),f&&!u&&e.jsxs("div",{className:"mb-3 relative inline-block",children:[e.jsx("img",{src:URL.createObjectURL(f),alt:"preview",className:"w-20 h-20 object-cover rounded-sm border border-gray-200"}),e.jsx("button",{onClick:()=>m(null),className:"absolute -top-2 -right-2 bg-black text-white p-1 rounded-full shadow-sm","aria-label":"Remove image",children:e.jsx(G,{size:12})})]}),u&&N>0&&e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-3",children:e.jsx("div",{className:"bg-[#B08D55] h-1.5 rounded-full transition-all duration-300",style:{width:`${N}%`}})}),e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer text-xs font-bold uppercase tracking-wider text-gray-500 hover:text-black transition-colors",children:[e.jsx(xe,{size:18})," Add Photo",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:x=>{x.target.files&&x.target.files[0]&&m(x.target.files[0])}})]}),e.jsx("button",{onClick:A,disabled:u||!h.trim(),className:"bg-[#B08D55] text-white px-6 py-2 text-xs font-bold uppercase tracking-widest rounded-sm hover:bg-[#8c6a40] disabled:opacity-50 flex items-center gap-2 transition-colors",children:u?e.jsxs(e.Fragment,{children:["Posting ",e.jsx(Z,{size:14,className:"animate-spin"})]}):"Submit Review"})]})]})};function Ge(a){if(!a)return"";try{return(a.toDate?a.toDate():new Date(a)).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"})}catch{return""}}const Ke=i.memo(({review:a,user:o,onDeleteReview:c,onMarkHelpful:u})=>{const[t,g]=i.useState(!1),[j,h]=i.useState(!1),[l,f]=i.useState(a.helpfulCount||0),[m,N]=i.useState(!1),k=o&&a.userId===o.uid,s=()=>{window.confirm("Are you sure you want to delete this review?")&&(g(!0),c(a.id))},A=async()=>{!o||m||j||(h(!0),N(!0),f(x=>x+1),h(!1))};return e.jsxs("div",{className:"bg-white p-0 border-b border-gray-100 pb-6 last:border-0",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-400",children:e.jsx(he,{size:16})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-gray-900",children:a.username}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex text-yellow-400",children:Array.from({length:5}).map((x,b)=>e.jsx(E,{size:12,className:b<(a.rating||0)?"fill-current":"text-gray-200"},b))}),e.jsx("span",{className:"text-xs text-gray-400",children:Ge(a.createdAt)})]})]})]})}),e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mt-3 mb-4",children:a.comment}),a.imageUrl&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:a.imageUrl,alt:"Review",className:"w-24 h-24 object-cover rounded-sm border border-gray-100 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(a.imageUrl,"_blank")})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:A,disabled:!o||m||j,className:`text-xs font-bold uppercase tracking-wider flex items-center gap-1.5 px-3 py-1.5 rounded-sm transition-colors ${m?"text-green-600 bg-green-50 cursor-default":"text-gray-400 hover:text-brand-dark hover:bg-gray-50"}`,children:[j?e.jsx(Z,{size:12,className:"animate-spin"}):m?e.jsx(me,{size:14}):e.jsx(ue,{size:14}),"Helpful ",l>0?`(${l})`:""]}),k&&e.jsxs("button",{onClick:s,disabled:t,className:"text-xs text-red-400 hover:text-red-600 font-bold uppercase tracking-wider flex items-center gap-1 transition-colors",children:[t?e.jsx(Z,{size:12,className:"animate-spin"}):e.jsx(ge,{size:14}),"Delete"]})]})]})}),Ve=({productId:a})=>{const{user:o}=Be(),[c,u]=i.useState([]),[t,g]=i.useState(!1),[j,h]=i.useState(!0);i.useEffect(()=>{const f=re(K(L,"reviews"),ie("spotId","==",a),Le("createdAt","desc")),m=ne(f,N=>{const k=N.docs.map(s=>({id:s.id,...s.data()}));u(k),h(!1)});return()=>m()},[a]);const l=async f=>{try{await Te(W(L,"reviews",f))}catch(m){console.error("Error deleting review:",m)}};return e.jsx("div",{className:"bg-white border-t border-heritage-border/40 py-16",id:"reviews",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 md:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-10 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-serif text-3xl text-heritage-charcoal italic mb-2",children:"Customer Reviews"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-stone-500",children:[e.jsx("div",{className:"flex text-heritage-gold",children:Array.from({length:5}).map((f,m)=>e.jsx(E,{size:16,className:m<4?"fill-current":"text-stone-200"},m))}),e.jsxs("span",{children:["Based on ",c.length," reviews"]})]})]}),e.jsxs("button",{onClick:()=>g(!t),className:"bg-heritage-charcoal text-white px-6 py-3 text-xs font-bold uppercase tracking-widest hover:bg-heritage-gold transition-colors rounded-sm flex items-center gap-2",children:[e.jsx(pe,{size:16})," ",t?"Cancel Review":"Write a Review"]})]}),t&&e.jsx("div",{className:"mb-12 animate-fade-in",children:o?e.jsx(Ze,{spotId:a,user:o,onPostSuccess:()=>g(!1),isPosting:!1,setIsPosting:()=>{}}):e.jsxs("div",{className:"bg-stone-50 p-6 text-center border border-stone-200 rounded-sm",children:[e.jsx("p",{className:"text-stone-500 mb-4",children:"Please sign in to share your experience."}),e.jsx("a",{href:"/login",className:"text-heritage-gold font-bold uppercase text-xs border-b border-heritage-gold pb-0.5",children:"Login Now"})]})}),e.jsx("div",{className:"space-y-6",children:j?e.jsx("div",{className:"text-center py-10 text-stone-400",children:"Loading reviews..."}):c.length===0?e.jsxs("div",{className:"text-center py-16 bg-stone-50/50 rounded-sm border border-dashed border-stone-200",children:[e.jsx("p",{className:"text-stone-400 italic mb-2",children:"No reviews yet."}),e.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-stone-300",children:"Be the first to review this masterpiece"})]}):c.map(f=>e.jsx(Ke,{review:f,user:o,onDeleteReview:l},f.id))})]})})},Je=({isOpen:a,onClose:o,images:c,initialIndex:u=0})=>{const[t,g]=i.useState(u),[j,h]=i.useState(0),[l,f]=i.useState(!1),m=i.useRef(null),N=i.useRef(null),k=i.useRef(null),s=i.useRef({x:0,y:0,scale:1,isPanning:!1,pinchCenter:{x:0,y:0},startDist:0,startScale:1,startX:0,startY:0,startPanX:0,startPanY:0}),A=i.useRef(0);i.useEffect(()=>{a&&(g(u),h(0),P(!1))},[a,u]),i.useEffect(()=>{if(N.current){const r=N.current.querySelector(`img[data-index="${t}"]`);r&&(m.current=r,P(!0))}},[t]);const x=r=>{if(!N.current)return{minX:0,maxX:0,minY:0,maxY:0};const{offsetWidth:n,offsetHeight:v}=N.current,p=Math.max(0,(n*r-n)/2),d=Math.max(0,(v*r-v)/2);return{minX:-p,maxX:p,minY:-d,maxY:d}},b=i.useCallback((r=!1)=>{if(m.current){const{x:n,y:v,scale:p}=s.current;m.current.style.transform=`translate3d(${n}px, ${v}px, 0) scale(${p})`,m.current.style.transition=r?"transform 0.3s cubic-bezier(0.25, 1, 0.5, 1)":"none",k.current&&(k.current.style.opacity=p>1.01?"0":"1",k.current.style.pointerEvents="none")}},[]),P=(r=!0)=>{s.current={x:0,y:0,scale:1,isPanning:!1},b(r)},S=i.useCallback(r=>{r==null||r.stopPropagation(),!l&&(h(1),g(n=>(n+1)%c.length))},[c.length,l]),R=i.useCallback(r=>{r==null||r.stopPropagation(),!l&&(h(-1),g(n=>(n-1+c.length)%c.length))},[c.length,l]),D=r=>{if(!l){if(r.touches.length===1){const n=Date.now();if(n-A.current<300){M(r.touches[0]),A.current=0;return}A.current=n,s.current.isPanning=!0,s.current.startX=r.touches[0].clientX,s.current.startY=r.touches[0].clientY,s.current.startPanX=s.current.x,s.current.startPanY=s.current.y}else if(r.touches.length===2){s.current.isPanning=!0;const n=r.touches[0],v=r.touches[1],p=Math.hypot(n.clientX-v.clientX,n.clientY-v.clientY);s.current.startDist=p,s.current.startScale=s.current.scale;const d=N.current.getBoundingClientRect();s.current.pinchCenter={x:(n.clientX+v.clientX)/2-(d.left+d.width/2),y:(n.clientY+v.clientY)/2-(d.top+d.height/2)},s.current.startPanX=s.current.x,s.current.startPanY=s.current.y}}},X=r=>{if(!(!s.current.isPanning||l)){if(r.touches.length===2){const n=r.touches[0],v=r.touches[1],p=Math.hypot(n.clientX-v.clientX,n.clientY-v.clientY);if(s.current.startDist===0)return;const d=p/s.current.startDist,y=Math.min(Math.max(s.current.startScale*d,.5),8),T=y/s.current.startScale,I=s.current.pinchCenter.x-(s.current.pinchCenter.x-s.current.startPanX)*T,F=s.current.pinchCenter.y-(s.current.pinchCenter.y-s.current.startPanY)*T;s.current.scale=y,s.current.x=I,s.current.y=F,b(!1)}else if(r.touches.length===1){const n=r.touches[0].clientX-s.current.startX,v=r.touches[0].clientY-s.current.startY;if(s.current.scale<=1.05)s.current.x=n,s.current.y=0,b(!1);else{let p=s.current.startPanX+n,d=s.current.startPanY+v;const y=x(s.current.scale);p>y.maxX?p=y.maxX+(p-y.maxX)*.3:p<y.minX&&(p=y.minX-(y.minX-p)*.3),d>y.maxY?d=y.maxY+(d-y.maxY)*.3:d<y.minY&&(d=y.minY-(y.minY-d)*.3),s.current.x=p,s.current.y=d,b(!1)}}}},C=r=>{if(r.touches.length>0){const n=r.touches[0];s.current.startX=n.clientX,s.current.startY=n.clientY,s.current.startPanX=s.current.x,s.current.startPanY=s.current.y;return}if(s.current.isPanning=!1,s.current.scale<1)P(!0);else if(s.current.scale<=1.05)s.current.x>50?R():s.current.x<-50?S():P(!0);else{const n=x(s.current.scale);let v=s.current.x,p=s.current.y,d=!1;s.current.x>n.maxX?(v=n.maxX,d=!0):s.current.x<n.minX&&(v=n.minX,d=!0),s.current.y>n.maxY?(p=n.maxY,d=!0):s.current.y<n.minY&&(p=n.minY,d=!0),d&&(s.current.x=v,s.current.y=p,b(!0))}},M=r=>{if(s.current.scale>1.1)P(!0);else{const n=N.current.getBoundingClientRect(),v=2.5,p=r.clientX-(n.left+n.width/2),d=r.clientY-(n.top+n.height/2),y=-p*(v-1),T=-d*(v-1);s.current={x:y,y:T,scale:v,isPanning:!1},b(!0)}},Y={enter:r=>({x:r>0?"100%":"-100%"}),center:{zIndex:1,x:0},exit:r=>({zIndex:0,x:r<0?"100%":"-100%"})};return e.jsx(H,{children:a&&e.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[2000] bg-black flex flex-col items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-black/90 z-0"}),e.jsx(H,{mode:"popLayout",children:e.jsx(U.img,{src:c[t],initial:{opacity:0},animate:{opacity:.4},exit:{opacity:0},transition:{duration:.5},className:"absolute inset-0 w-full h-full object-cover blur-[80px] z-10 scale-110"},t)}),e.jsx("div",{className:"absolute inset-0 bg-black/20 z-20"})]}),e.jsxs("div",{className:"absolute top-0 left-0 w-full p-4 flex justify-between items-center z-50 pointer-events-none",children:[e.jsxs("div",{className:"pointer-events-auto text-white/90 text-sm font-medium tracking-wide drop-shadow-md font-mono",children:[t+1," / ",c.length]}),e.jsx("button",{onClick:o,className:"pointer-events-auto p-3 bg-transparent hover:bg-white/10 rounded-full transition-colors text-white drop-shadow-md",children:e.jsx(G,{size:26,strokeWidth:1.5})})]}),e.jsx("button",{onClick:R,className:"absolute left-0 z-40 h-24 w-12 flex items-center justify-center bg-transparent hover:bg-white/5 transition-colors outline-none cursor-pointer",children:e.jsx(se,{size:32,strokeWidth:1,className:"text-white/80 drop-shadow-lg"})}),e.jsx("button",{onClick:S,className:"absolute right-0 z-40 h-24 w-12 flex items-center justify-center bg-transparent hover:bg-white/5 transition-colors outline-none cursor-pointer",children:e.jsx(ae,{size:32,strokeWidth:1,className:"text-white/80 drop-shadow-lg"})}),e.jsxs("div",{ref:N,className:"relative w-full h-full flex items-center justify-center overflow-hidden z-30 touch-none",onTouchStart:D,onTouchMove:X,onTouchEnd:C,children:[e.jsx(H,{initial:!1,custom:j,mode:"popLayout",children:e.jsx(U.div,{custom:j,variants:Y,initial:"enter",animate:"center",exit:"exit",transition:{x:{type:"tween",ease:"circOut",duration:.25}},onAnimationStart:()=>f(!0),onAnimationComplete:()=>f(!1),className:"absolute inset-0 flex items-center justify-center w-full h-full",children:e.jsx("img",{"data-index":t,src:c[t],alt:"Zoom View",className:"max-w-full max-h-screen object-contain select-none shadow-2xl",draggable:"false",style:{cursor:"grab",touchAction:"none",transformOrigin:"center center",willChange:"transform"}})},t)}),e.jsx("div",{ref:k,className:"absolute bottom-10 pointer-events-none flex flex-col items-center gap-2 transition-opacity duration-300 z-10",children:e.jsx("div",{className:"bg-white/10 backdrop-blur-md text-white/90 px-3 py-1 rounded-full text-[10px] font-bold tracking-[0.2em] border border-white/10 shadow-lg",children:"DOUBLE TAP"})})]})]})})},Qe=({product:a,visible:o})=>e.jsxs("div",{className:`${o?"animate-enter":"animate-leave"} fixed bottom-4 left-4 bg-white border border-heritage-gold/30 p-3 shadow-[0_4px_12px_rgba(0,0,0,0.08)] rounded-sm flex gap-3 z-[100] max-w-[280px]`,children:[e.jsx("img",{src:a.featuredImageUrl,alt:"",className:"w-12 h-16 object-cover rounded-sm"}),e.jsxs("div",{className:"flex flex-col justify-center",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-widest text-heritage-gold font-medium mb-1",children:"Added to Wishlist"}),e.jsx("p",{className:"font-serif text-sm text-heritage-charcoal line-clamp-2 leading-tight",children:a.name})]})]}),q=({label:a,price:o,isChecked:c,onChange:u,description:t})=>e.jsxs("label",{className:`flex items-start gap-3 cursor-pointer group p-4 border rounded-sm transition-all duration-300 bg-white ${c?"border-heritage-gold bg-heritage-gold/5":"border-heritage-border/60 hover:border-heritage-charcoal"}`,children:[e.jsx("div",{className:"pt-0.5",children:e.jsx("input",{type:"checkbox",className:"accent-heritage-charcoal w-4 h-4",checked:c,onChange:u})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[e.jsx("span",{className:"text-sm font-medium text-heritage-charcoal",children:a}),e.jsxs("span",{className:"text-sm text-heritage-charcoal",children:["+ ₹",B(o)]})]}),t&&e.jsx("p",{className:"text-xs text-heritage-grey leading-relaxed",children:t})]})]}),et=({src:a,alt:o})=>{const[c,u]=i.useState(!1),[t,g]=i.useState({x:0,y:0}),j=i.useRef(null),h=l=>{if(!j.current)return;const{left:f,top:m,width:N,height:k}=j.current.getBoundingClientRect(),s=l.pageX-f-window.scrollX,A=l.pageY-m-window.scrollY;let x=s/N*100,b=A/k*100;x>100&&(x=100),x<0&&(x=0),b>100&&(b=100),b<0&&(b=0),g({x,y:b})};return e.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-stone-50 cursor-crosshair group rounded-sm",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),onMouseMove:h,children:[e.jsx("img",{ref:j,src:a,alt:o,className:"w-full h-full object-cover transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none hidden lg:block z-20",style:{display:c?"block":"none",backgroundImage:`url('${a}')`,backgroundPosition:`${t.x}% ${t.y}%`,backgroundSize:"250%"}})]})},tt=({images:a,productName:o,onOpenZoom:c})=>{const[u,t]=i.useState(0),g=i.useRef(null),j=()=>{if(g.current){const h=Math.round(g.current.scrollLeft/g.current.offsetWidth);t(h)}};return e.jsxs("div",{className:"flex flex-col gap-4 relative",children:[e.jsxs("div",{className:"lg:hidden relative",children:[e.jsx("div",{ref:g,onScroll:j,className:"w-full aspect-[3/4] overflow-x-auto snap-x snap-mandatory flex scrollbar-hide rounded-sm",children:a.map((h,l)=>e.jsx("div",{className:"w-full flex-shrink-0 snap-center relative",onClick:()=>c(l),children:e.jsx("img",{src:h,alt:o,className:"w-full h-full object-cover"})},l))}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10",children:a.map((h,l)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${l===u?"bg-heritage-gold w-3":"bg-white/60"}`},l))})]}),e.jsxs("div",{className:"hidden lg:flex flex-row gap-4 items-start",children:[e.jsx("div",{className:"flex flex-col gap-3 overflow-y-auto scrollbar-hide w-24 shrink-0 max-h-[600px]",children:a.map((h,l)=>e.jsx("button",{onClick:()=>t(l),className:`relative w-20 h-24 shrink-0 overflow-hidden border rounded-sm transition-all duration-300 bg-stone-50 ${u===l?"border-heritage-gold opacity-100 ring-1 ring-heritage-gold shadow-sm":"border-transparent opacity-70 hover:opacity-100"}`,children:e.jsx("img",{src:h,alt:"",className:"w-full h-full object-cover"})},l))}),e.jsx("div",{className:"flex-1 relative w-full aspect-[3/4] shadow-sm border border-heritage-border/20 rounded-sm",children:e.jsx(et,{src:a[u],alt:o})})]})]})},te=({title:a,children:o,isOpen:c,onClick:u})=>e.jsxs("div",{className:"border-b border-heritage-border/60",children:[e.jsxs("button",{onClick:u,className:"w-full flex justify-between items-center py-5 group text-left",children:[e.jsx("span",{className:"font-serif text-lg text-heritage-charcoal group-hover:text-heritage-gold transition-colors",children:a}),e.jsx(ze,{size:16,className:`text-heritage-charcoal transition-transform duration-300 ${c?"rotate-180":""}`})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-500 ${c?"max-h-[1200px] opacity-100 pb-6":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"text-sm font-sans text-heritage-grey leading-loose font-light",children:o})})]});function ot(){var V,J;const{productId:a}=Pe(),{addToCart:o}=We(),{toggleFavorite:c,isFavorite:u}=Fe();Re();const[t,g]=i.useState(null),[j,h]=i.useState([]),[l,f]=i.useState(!0),[m,N]=i.useState("care"),[k,s]=i.useState(""),[A,x]=i.useState(!1),[b,P]=i.useState(0),[S,R]=i.useState({fallPico:!1,blouseStitching:!1,tassels:!1}),[D,X]=i.useState(!1),C=t?u(t.id):!1;i.useLayoutEffect(()=>{l||window.scrollTo({top:0,left:0,behavior:"instant"})},[l,a]),i.useEffect(()=>{f(!0);const w=ne(W(L,"products",a),z=>{z.exists()?g({id:z.id,...z.data()}):g(null),f(!1)});return()=>w()},[a]);const M=i.useMemo(()=>t?t.category==="artifact"&&t.subCategory?t.subCategory:t.category||t.subCategory||"Collection":"Collection",[t]);i.useEffect(()=>{if(!t)return;(async()=>{try{let z=t.subCategory||(t.category==="artifact"?"":t.category);if(!z)return;const oe=re(K(L,"products"),ie("subCategory","==",z),Ie(6)),de=await $e(oe);let Q=[];de.forEach(O=>{O.id!==t.id&&Q.push({id:O.id,...O.data()})}),h(Q.slice(0,4))}catch(z){console.error("Error fetching related products:",z)}})()},[t]);const Y=i.useMemo(()=>t?t.imageUrls&&t.imageUrls.length>0?t.imageUrls:[t.featuredImageUrl]:[],[t]),r=i.useMemo(()=>t?{"@context":"https://schema.org/","@type":"Product",name:t.name,image:Y,description:t.fullDescription||t.description,sku:t.sku||t.id,aggregateRating:{"@type":"AggregateRating",ratingValue:t.averageRating||5,reviewCount:t.reviewCount||1},brand:{"@type":"Brand",name:"Pahnawa Banaras"},offers:{"@type":"Offer",url:window.location.href,priceCurrency:"INR",price:t.price,availability:t.stock>0?"https://schema.org/InStock":"https://schema.org/OutOfStock",itemCondition:"https://schema.org/NewCondition"}}:null,[t,Y]),n=t&&["suit","blouse","lehenga","kurta","jacket"].some(w=>{var z;return(z=t.subCategory)==null?void 0:z.toLowerCase().includes(w)}),v=(V=t==null?void 0:t.subCategory)==null?void 0:V.toLowerCase().includes("saree"),p=t?Number(t.price):0;let d=0;S.fallPico&&(d+=150),S.blouseStitching&&(d+=1200),S.tassels&&(d+=250);const y=p+d,T=t&&t.stock<5&&t.stock>0,I=()=>{o({...t,price:y,selectedOptions:S,quantity:1}),_.success("Added to Bag",{position:"bottom-center"})},F=()=>{c(t.id),C||_.custom(w=>e.jsx(Qe,{product:t,visible:w.visible}),{position:"bottom-left",duration:3e3})},le=async()=>{if(navigator.share)try{await navigator.share({title:t.name,text:`Check out this beautiful ${t.name} on Pahnawa Banaras.`,url:window.location.href})}catch(w){console.log("Error sharing:",w)}else navigator.clipboard.writeText(window.location.href),_.success("Link copied to clipboard",{icon:e.jsx(Se,{size:18})})},ce=()=>{window.open(`https://wa.me/919876543210?text=I am interested in ${t.name} (SKU: ${t.sku||t.id.substring(0,8)})`,"_blank")};return e.jsxs("div",{className:"min-h-screen bg-heritage-paper text-heritage-charcoal font-sans",children:[t?e.jsx(ee,{title:t.name,description:(J=t.fullDescription)==null?void 0:J.substring(0,160),image:t.featuredImageUrl,schema:r}):e.jsx(ee,{title:"Loading Product..."}),e.jsx(Oe,{}),l||!t?e.jsx("div",{className:"pt-4 px-6",children:e.jsx(Ee,{})}):e.jsxs("div",{className:"pt-4 pb-24 px-4 md:px-8 lg:px-12 max-w-[1400px] mx-auto animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 md:mb-8 pb-4 border-b border-heritage-border/40 text-[10px] uppercase tracking-[0.15em] text-heritage-grey font-medium",children:[e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[e.jsx($,{to:"/",className:"hover:text-heritage-gold transition-colors",children:"Home"}),e.jsx("span",{className:"text-heritage-border",children:"/"}),e.jsx($,{to:`/shop?cat=${M.toLowerCase()}`,className:"hover:text-heritage-gold transition-colors",children:M}),e.jsx("span",{className:"text-heritage-border",children:"/"}),e.jsx("span",{className:"text-heritage-charcoal truncate max-w-[200px]",children:t.name})]}),e.jsxs("div",{className:"flex gap-6 mt-4 md:mt-0",children:[e.jsxs($,{to:"#",className:"flex items-center gap-1 hover:text-heritage-gold transition-colors group",children:[e.jsx(se,{size:14,className:"group-hover:-translate-x-0.5 transition-transform"})," Previous"]}),e.jsx("span",{className:"text-heritage-border opacity-50",children:"|"}),e.jsxs($,{to:"#",className:"flex items-center gap-1 hover:text-heritage-gold transition-colors group",children:["Next ",e.jsx(ae,{size:14,className:"group-hover:translate-x-0.5 transition-transform"})]})]})]}),e.jsxs("main",{className:"flex flex-col lg:flex-row gap-8 lg:gap-20 items-start",children:[e.jsx("div",{className:"w-full lg:w-[58%]",children:e.jsx(tt,{images:Y,productName:t.name,onOpenZoom:w=>{P(w),x(!0)}})}),e.jsxs("div",{className:"w-full lg:w-[42%] flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"max-w-md",children:[e.jsx("h1",{className:"font-serif text-2xl md:text-3xl lg:text-4xl font-light text-heritage-charcoal leading-tight mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"flex text-heritage-gold",children:Array.from({length:5}).map((w,z)=>e.jsx(E,{size:14,className:z<Math.round(t.averageRating||5)?"fill-current":"text-gray-200"},z))}),e.jsxs("a",{href:"#reviews",className:"text-xs text-stone-500 hover:text-heritage-gold transition-colors",children:["(",t.reviewCount||0," reviews)"]})]})]}),e.jsxs("div",{className:"flex gap-5 text-heritage-charcoal/70 pt-2",children:[e.jsx("button",{onClick:F,className:"hover:text-heritage-gold transition-colors group relative",children:e.jsx(fe,{size:24,fill:C?"#9D8461":"none",stroke:C?"#9D8461":"currentColor",strokeWidth:1.2,className:"group-active:scale-90 transition-transform"})}),e.jsx("button",{onClick:le,className:"hover:text-heritage-gold transition-colors",children:e.jsx(be,{size:24,strokeWidth:1.2})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 mb-6 border-b border-heritage-border/50 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-3xl font-light tracking-wide text-heritage-charcoal",children:["₹",B(p)]}),e.jsx("span",{className:"text-[9px] text-green-700 px-2 py-0.5 uppercase tracking-widest border border-green-200 bg-green-50 rounded-sm",children:"In Stock"})]}),T&&e.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-xs font-medium mt-1 animate-pulse",children:[e.jsx(je,{size:14})," Only ",t.stock," left - Order soon!"]}),e.jsx("p",{className:"text-xs text-heritage-grey mt-1",children:"Inclusive of all taxes"}),e.jsxs("p",{className:"text-[10px] uppercase tracking-widest text-heritage-grey mt-2 font-medium",children:["SKU: ",e.jsx("span",{className:"text-heritage-charcoal",children:t.sku||t.id.substring(0,8).toUpperCase()})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"font-sans text-sm text-heritage-charcoal/80 leading-relaxed mb-6 font-light",children:t.description||t.fullDescription}),e.jsxs("div",{className:"bg-heritage-paper border border-heritage-border/60 p-5 rounded-sm",children:[e.jsxs("h3",{className:"text-xs font-serif italic text-heritage-gold mb-3 flex items-center gap-2",children:[e.jsx(ve,{size:14})," Product Highlights"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-3 gap-x-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-heritage-grey mb-0.5",children:"Technique"}),e.jsx("span",{className:"font-medium text-heritage-charcoal",children:t.technique||"Handwoven Kadhua"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-heritage-grey mb-0.5",children:"Fabric"}),e.jsx("span",{className:"font-medium text-heritage-charcoal",children:t.fabric||"Pure Katan Silk"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-heritage-grey mb-0.5",children:"Origin"}),e.jsx("span",{className:"font-medium text-heritage-charcoal",children:t.origin||"Varanasi, India"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-heritage-grey mb-0.5",children:"Zari"}),e.jsx("span",{className:"font-medium text-heritage-charcoal",children:t.zariType||"Fine Zari"})]})]})]})]}),e.jsxs("div",{className:"space-y-8 mb-10",children:[n&&e.jsxs("div",{className:"flex justify-between items-center border-b border-heritage-border/40 pb-2",children:[e.jsx("span",{className:"text-sm font-medium font-serif italic text-heritage-charcoal",children:"Select Size"}),e.jsxs("button",{onClick:()=>X(!0),className:"flex items-center gap-2 text-[10px] uppercase tracking-widest text-heritage-gold hover:text-heritage-charcoal transition-colors group",children:[e.jsx(we,{size:14})," ",e.jsx("span",{className:"border-b border-heritage-gold group-hover:border-heritage-charcoal",children:"Size Guide"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium font-serif italic text-heritage-charcoal",children:"Customization Services"}),e.jsx(q,{label:"Add Fall & Pico",price:150,isChecked:S.fallPico,onChange:()=>R(w=>({...w,fallPico:!w.fallPico})),description:"Essential finish for sarees. Adds 1-2 days to delivery."}),v&&e.jsxs(e.Fragment,{children:[e.jsx(q,{label:"Premium Tassels / Kuchu",price:250,isChecked:S.tassels,onChange:()=>R(w=>({...w,tassels:!w.tassels})),description:"Handcrafted tassels added to the pallu."}),e.jsx(q,{label:"Tailored Blouse Stitching",price:1200,isChecked:S.blouseStitching,onChange:()=>R(w=>({...w,blouseStitching:!w.blouseStitching})),description:"Our stylist will contact you for measurements. Adds 5-7 days."})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsx("button",{onClick:I,className:"w-full bg-heritage-charcoal text-white h-14 uppercase tracking-[0.2em] text-[11px] font-medium hover:bg-heritage-gold transition-all duration-500 shadow-sm hover:shadow-md rounded-sm flex items-center justify-center gap-3",children:e.jsx("span",{children:d>0?`Add to Cart • ₹${B(y)}`:"Add to Cart"})}),e.jsxs("button",{onClick:ce,className:"w-full border border-heritage-charcoal/40 text-heritage-charcoal h-12 uppercase tracking-[0.2em] text-[10px] font-medium hover:border-heritage-charcoal hover:bg-heritage-sand/30 flex items-center justify-center gap-3 transition-all duration-300 rounded-sm",children:[e.jsx(ye,{size:16,strokeWidth:1})," Enquire on WhatsApp"]})]}),e.jsxs("div",{className:"mb-12",children:[e.jsx(te,{title:"Material & Care",isOpen:m==="care",onClick:()=>N(m==="care"?"":"care"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-heritage-grey mb-1",children:"Warp"}),e.jsx("span",{className:"text-sm font-medium",children:t.warpMaterial||"Pure Silk"})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("span",{className:"block text-[10px] uppercase tracking-widest text-heritage-grey mb-1",children:"Weft"}),e.jsx("span",{className:"text-sm font-medium",children:t.weftMaterial||"Pure Silk"})]})]}),e.jsx("div",{className:"pt-4 border-t border-heritage-border/30",children:e.jsxs("ul",{className:"list-disc pl-5 space-y-2 text-sm text-heritage-charcoal/80 marker:text-heritage-gold",children:[e.jsx("li",{children:t.care||"Dry Clean Only. Do not handwash."}),e.jsx("li",{children:"Always store in a muslin cloth or a pure cotton bag to allow the fabric to breathe."}),e.jsx("li",{children:"Avoid direct contact with perfumes, sprays, or moisture."})]})})]})}),e.jsx(te,{title:"Shipping & Returns",isOpen:m==="shipping",onClick:()=>N(m==="shipping"?"":"shipping"),children:e.jsxs("div",{className:"space-y-3 text-sm text-heritage-charcoal/80",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping:"})," Dispatched within 24-48 hours. Domestic delivery takes 3-5 business days."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Returns:"})," We accept returns within 7 days of delivery for defective or incorrect items."]})]})})]}),e.jsxs("div",{className:"flex justify-around items-center border-t border-heritage-border/40 py-8 opacity-70",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ne,{size:20,className:"text-heritage-charcoal",strokeWidth:1}),e.jsx("span",{className:"text-[9px] uppercase tracking-widest font-medium",children:"Authentic"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(ke,{size:20,className:"text-heritage-charcoal",strokeWidth:1}),e.jsx("span",{className:"text-[9px] uppercase tracking-widest font-medium",children:"Global Ship"})]}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Ce,{size:20,className:"text-heritage-charcoal",strokeWidth:1}),e.jsx("span",{className:"text-[9px] uppercase tracking-widest font-medium",children:"Secure"})]})]})]})]}),e.jsx(Ve,{productId:t.id}),e.jsxs("section",{className:"mt-12 border-t border-heritage-border/40 pt-16",children:[e.jsx("h2",{className:"text-center font-serif text-3xl italic text-heritage-charcoal mb-12",children:"You May Also Like"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-10",children:j.length>0?j.map(w=>e.jsx(_e,{item:w},w.id)):e.jsx("div",{className:"col-span-full text-center text-heritage-grey text-sm italic",children:"Explore our collection for more treasures."})})]})]}),!l&&t&&e.jsxs("div",{className:"lg:hidden fixed bottom-0 left-0 w-full bg-white border-t border-heritage-border p-4 z-50 flex gap-4 items-center safe-area-bottom shadow-[0_-4px_10px_rgba(0,0,0,0.05)]",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-serif text-heritage-charcoal truncate mb-0.5",children:t.name}),e.jsxs("p",{className:"text-sm font-bold text-heritage-charcoal",children:["₹",B(y)]})]}),e.jsx("button",{onClick:I,className:"bg-heritage-charcoal text-white px-8 py-3 text-[10px] uppercase tracking-widest rounded-sm",children:"Add to Bag"})]}),t&&e.jsx(Je,{isOpen:A,onClose:()=>x(!1),images:Y,initialIndex:b}),t&&e.jsx(qe,{isOpen:D,onClose:()=>X(!1),category:t.category}),e.jsx(He,{})]})}export{ot as default};
